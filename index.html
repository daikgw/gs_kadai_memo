<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>myMemoPad</title>
    <!-- <script src="js/jquery-2.1.3.min.js"></script> -->
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/sample.css">
</head>

<body style="display:none;">
    <!-- 最終は数を測定できるといいかも -->
    <header>
        <h1>メモ帳</h1>
    </header>

    <main>
        <div class="memo">
            <!-- textareaの背景に影文字を入れる -->
            <textarea class="name" id="name" placeholder="氏名" cols="15" rows="1" maxlength="15"></textarea>
            <div class="midashi">
                <textarea class="title" id="title" placeholder="タイトル" cols="15" rows="1" maxlength="15"></textarea>
                <!-- canvas対応用のセレクトボックス、また理想は初期値は選択してくださいにする -->
                <select class="kind" id="kind" name="kind">
                    <option value="メモ" selected>メモ</option>
                    <option value="絵画">絵画</option>
                </select>
            </div>
            <!-- 上限値を設定してないので超えた時の処理についても考える必要はあり -->
            <textarea class="text_area" id="text_area" placeholder="入力はこちらです"></textarea>
        </div>
        <ul>
            <!-- 理想はcanvasとメモを両方実現できるようにすること -->
            <li id="new">新規登録</li>
            <li id="save">保存</li>
            <li id="clear">消去</li>
            <!-- 理想は保存する物事にnameをつけて、それを呼び出せるようにしたい -->
            <li id="back">前に戻る</li>
        </ul>

    </main>

    <footer><small>G's</small></footer>

    <!-- jQueryの読み込み -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        $("body").fadeIn(3000);
        let save_count = 0;

        $("#save").on("click",function(){
            save_count ++;
            const name = $("#name").val();
            const title = $("#title").val();
            const kind = $("#kind").val();
            const text_area = $("#text_area").val();
            let memo_info = [{
                    "name" : name,
                    "title" : title,
                    "kind" : kind,
                    "text_area" : text_area
                }];
            // データに順番をつけるときに使う
            // let c = "memo"+save_count;
            // 登録順に記録するための処理
            // memoinfoだとobject形式になっている
            console.dir(memo_info);
            let m = JSON.stringify(memo_info);
            // json形式に修正をする
            console.log(m);
            localStorage.setItem("memo",m);
            alert("saveしました");
        });
        // 名前などの入力欄に一斉削除ボタンがあればいいかも
        $("#new").on("click",function(){
            $("#name").val("");
            $("#title").val("");
            $("#kind").val("メモ");
            $("#text_area").val("");
        });

        //2.clear クリックイベント
        // どのファイルを削除するかどうかの選択ができる状態にする必要がある、追加登録機能にちかい
        $("#clear").on("click",function(){
            localStorage.removeItem("memo");
            $("#text_area").val("");
            alert("deleteしました");
        });

        if(localStorage.getItem("memo")){
            const json = localStorage.getItem("memo");
            let reload_info = JSON.parse(json);
            $("#name").val((reload_info).name);
            $("#title").val((reload_info).title);
            $("#kind").val((reload_info).kind);
            $("#text_area").val((reload_info).text_area);
        }




        //3.ページ読み込み：保存データ取得表示




        //ロード時に表示
        //※こんなこともできる例
    </script>
</body>

</html>